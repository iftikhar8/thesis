---
title: "Review Summary"
output: html_notebook
---


```{r}
#load libraries
library("tidyverse")

#load data
data.all <- read_csv("data/lit_review.csv")
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file).

```{r}
#check the columns loaded
spec(data.all)

#get a summary of all the data
summary(data.all)
```

Subset data for analysis

```{r}
#extract data for single paper (is there a better way to do this?)
data.papers <- data.all %>% select(Paper_ID,Published,Oceanic_region,Years_total,Geographical_zone,Model_reuse,Model_name,Physical_model,Nested_submodels,Model_time_step) %>% 
  distinct(Paper_ID,Published,Oceanic_region,Years_total,Geographical_zone,Model_reuse,Model_name,Physical_model,Nested_submodels,Model_time_step)

#papers looking at fish
data.fish <- filter(data.all,Species_type == "Fish")
```


##Summary

The years the studies were published

```{r}
data.all <- mutate(data.all, movement = 
  Circatidal_migration |
  Pynocline_migration |
  Halocline_migration |
  Ontogentic_vertical_migration |
  Vertical_swimming_ability |
  Horizontal_swimming_ability |
  Sinking_velocity  | 
  Diel_vertical_migration)

data.all.test <- data.all %>% gather(Behaviours, Implemented, Passive_movement,movement)

data.papers.published <- data.all.test %>% select(Paper_ID,Published,Behaviours,Implemented) %>% distinct(Paper_ID,Published,Behaviours,Implemented)
data.papers.published <- filter(data.papers.published,Implemented == TRUE)
ggplot(data.papers.published, aes(Published)) + geom_bar(aes(fill = Behaviours)) +labs( x = "Publication year", y = "Number of papers")
```

The published studies for each model

```{r}
source("sort_factor.R")
ggplot(data.all,aes(SortFactorBySize(DOI))) + geom_bar() + theme(axis.text.x=element_blank(),
                        axis.ticks.x=element_blank()) + xlab("Models per paper")
```
